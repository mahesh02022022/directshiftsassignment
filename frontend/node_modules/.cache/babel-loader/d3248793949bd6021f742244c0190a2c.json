{"ast":null,"code":"var _jsxFileName = \"C:\\\\ruby_prg\\\\7\\\\react-wishlist-series\\\\frontend\\\\src\\\\app\\\\features\\\\routes\\\\PrivateRoute.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PrivateRoute(_ref) {\n  _s();\n\n  var _location$state;\n\n  let {\n    children\n  } = _ref;\n  const loading = useSelector(state => state.session.loading);\n  const accessToken = useSelector(state => state.session.accessToken);\n  const location = useLocation();\n  const fromLocation = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from;\n  const previousLocation = fromLocation ? fromLocation : {\n    pathname: '/login'\n  };\n\n  if (accessToken) {\n    return children;\n  } else if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 14\n    }, this);\n  } else if (!accessToken && !loading) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: previousLocation,\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Something went wrong\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 14\n    }, this);\n  }\n}\n\n_s(PrivateRoute, \"rntkMEYBXUfzaVEGoQThv3ciaQs=\", false, function () {\n  return [useSelector, useSelector, useLocation];\n});\n\n_c = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"sources":["C:/ruby_prg/7/react-wishlist-series/frontend/src/app/features/routes/PrivateRoute.tsx"],"names":["React","useSelector","Navigate","useLocation","PrivateRoute","children","loading","state","session","accessToken","location","fromLocation","from","previousLocation","pathname"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;;;AAGA,SAASC,YAAT,OAA4C;AAAA;;AAAA;;AAAA,MAAtB;AAAEC,IAAAA;AAAF,GAAsB;AAC1C,QAAMC,OAAO,GAAGL,WAAW,CAAEM,KAAD,IAAsBA,KAAK,CAACC,OAAN,CAAcF,OAArC,CAA3B;AACA,QAAMG,WAAW,GAAGR,WAAW,CAAEM,KAAD,IAAuBA,KAAK,CAACC,OAAN,CAAcC,WAAtC,CAA/B;AACA,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAMQ,YAAY,sBAAID,QAAQ,CAACH,KAAb,oDAAG,gBAAyBK,IAA9C;AACA,QAAMC,gBAAgB,GAAGF,YAAY,GAAGA,YAAH,GAAkB;AAAEG,IAAAA,QAAQ,EAAE;AAAZ,GAAvD;;AAEA,MAAIL,WAAJ,EAAiB;AACb,WAAOJ,QAAP;AACH,GAFD,MAEO,IAAIC,OAAJ,EAAa;AAChB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH,GAFM,MAEA,IAAI,CAACG,WAAD,IAAgB,CAACH,OAArB,EAA8B;AACnC,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAEO,gBAAd;AAAgC,MAAA,KAAK,EAAE;AAACD,QAAAA,IAAI,EAAEF;AAAP,OAAvC;AAAyD,MAAA,OAAO;AAAhE;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFM,MAEA;AACH,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;AACF;;GAhBQN,Y;UACSH,W,EACIA,W,EACHE,W;;;KAHVC,Y;AAkBT,eAAeA,YAAf","sourcesContent":["import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { RootState } from '../../store';\r\n\r\nfunction PrivateRoute({ children  } : any ) {\r\n  const loading = useSelector((state: RootState) => state.session.loading);\r\n  const accessToken = useSelector((state : RootState) => state.session.accessToken);\r\n  const location = useLocation();\r\n  const fromLocation = (location.state as any)?.from;\r\n  const previousLocation = fromLocation ? fromLocation : { pathname: '/login'};\r\n\r\n  if (accessToken) {\r\n      return children;\r\n  } else if (loading) {\r\n      return <p>Loading...</p>;\r\n  } else if (!accessToken && !loading) {\r\n    return <Navigate to={previousLocation} state={{from: location}} replace/>;\r\n  } else {\r\n      return <p>Something went wrong</p>;\r\n  }\r\n}\r\n\r\nexport default PrivateRoute"]},"metadata":{},"sourceType":"module"}