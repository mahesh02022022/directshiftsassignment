{"ast":null,"code":"import axios from \"./axios\";\nconst LOGIN_URL = \"/oauth/token\";\nconst SIGNUP_URL = \"/users\";\nconst UPDATE_PROFILE_URL = \"/users\";\nconst LOGOUT_URL = \"/oauth/revoke\";\nconst CURRENT_USER_URL = \"/users/me\";\nconst CLIENT_ID = process.env.REACT_APP_CLIENT_ID;\nconst CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET;\nexport async function createUserWithEmailAndPassword(email, password) {\n  const data = {\n    email: email,\n    password: password,\n    client_id: CLIENT_ID\n  };\n  return axios.post(SIGNUP_URL, data).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}\nexport async function loginWithEmailAndPassword(email, password) {\n  const data = {\n    grant_type: \"password\",\n    email: email,\n    password: password,\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET\n  };\n  return axios.post(LOGIN_URL, data).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}\nexport async function updateUserProfile(currentPassword, token, email, password) {\n  const data = {\n    current_password: currentPassword,\n    email: email,\n    password: password,\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET\n  };\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  return axios.patch(UPDATE_PROFILE_URL, data, config).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}\nexport async function logoutUserWithToken(token) {\n  const data = {\n    token: token,\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET\n  };\n  return axios.post(LOGOUT_URL, data).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}\nexport async function requestAccessTokenWithRefreshToken(refreshToken) {\n  const data = {\n    grant_type: \"refresh_token\",\n    refresh_token: refreshToken,\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET\n  };\n  return axios.post(LOGIN_URL, data).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}\nexport async function getCurrentUser(accessToken) {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  };\n  return axios.get(CURRENT_USER_URL, config).then(response => {\n    return response.data;\n  }).catch(error => {\n    return error.response.data;\n  });\n}","map":{"version":3,"sources":["C:/ruby_prg/7/react-wishlist-series/frontend/src/app/api/sessionAPI.ts"],"names":["axios","LOGIN_URL","SIGNUP_URL","UPDATE_PROFILE_URL","LOGOUT_URL","CURRENT_USER_URL","CLIENT_ID","process","env","REACT_APP_CLIENT_ID","CLIENT_SECRET","REACT_APP_CLIENT_SECRET","createUserWithEmailAndPassword","email","password","data","client_id","post","then","response","catch","error","loginWithEmailAndPassword","grant_type","client_secret","updateUserProfile","currentPassword","token","current_password","config","headers","Authorization","patch","logoutUserWithToken","requestAccessTokenWithRefreshToken","refreshToken","refresh_token","getCurrentUser","accessToken","get"],"mappings":"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","sourcesContent":["import axios from \"./axios\";\r\n\r\nconst LOGIN_URL = \"/oauth/token\";\r\nconst SIGNUP_URL = \"/users\";\r\nconst UPDATE_PROFILE_URL = \"/users\";\r\nconst LOGOUT_URL = \"/oauth/revoke\";\r\nconst CURRENT_USER_URL = \"/users/me\";\r\n\r\nconst CLIENT_ID = process.env.REACT_APP_CLIENT_ID;\r\nconst CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET;\r\n\r\nexport async function createUserWithEmailAndPassword(\r\n  email: string,\r\n  password: string\r\n) {\r\n  const data = {\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n  };\r\n\r\n  return axios\r\n    .post(SIGNUP_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function loginWithEmailAndPassword(\r\n  email: string,\r\n  password: string\r\n) {\r\n  const data = {\r\n    grant_type: \"password\",\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGIN_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function updateUserProfile(\r\n  currentPassword: string,\r\n  token: string | undefined,\r\n  email?: string,\r\n  password?: string\r\n) {\r\n  const data = {\r\n    current_password: currentPassword,\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  return axios\r\n    .patch(UPDATE_PROFILE_URL, data, config)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function logoutUserWithToken(token: string) {\r\n  const data = {\r\n    token: token,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGOUT_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function requestAccessTokenWithRefreshToken(refreshToken: string) {\r\n  const data = {\r\n    grant_type: \"refresh_token\",\r\n    refresh_token: refreshToken,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGIN_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function getCurrentUser(accessToken: string) {\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${accessToken}`,\r\n    },\r\n  };\r\n\r\n  return axios\r\n    .get(CURRENT_USER_URL, config)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}