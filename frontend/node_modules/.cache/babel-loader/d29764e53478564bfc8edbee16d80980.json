{"ast":null,"code":"import _asyncToGenerator from\"C:/ruby_prg/7/react-wishlist-series/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\ruby_prg\\\\7\\\\react-wishlist-series\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"./axios\";var LOGIN_URL=\"/oauth/token\";var SIGNUP_URL=\"/users\";var UPDATE_PROFILE_URL=\"/users\";var LOGOUT_URL=\"/oauth/revoke\";var CURRENT_USER_URL=\"/users/me\";var CLIENT_ID=process.env.REACT_APP_CLIENT_ID;var CLIENT_SECRET=process.env.REACT_APP_CLIENT_SECRET;export function createUserWithEmailAndPassword(_x,_x2){return _createUserWithEmailAndPassword.apply(this,arguments);}function _createUserWithEmailAndPassword(){_createUserWithEmailAndPassword=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={email:email,password:password,client_id:CLIENT_ID};return _context.abrupt(\"return\",axios.post(SIGNUP_URL,data).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 2:case\"end\":return _context.stop();}}},_callee);}));return _createUserWithEmailAndPassword.apply(this,arguments);}export function loginWithEmailAndPassword(_x3,_x4){return _loginWithEmailAndPassword.apply(this,arguments);}function _loginWithEmailAndPassword(){_loginWithEmailAndPassword=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data={grant_type:\"password\",email:email,password:password,client_id:CLIENT_ID,client_secret:CLIENT_SECRET};return _context2.abrupt(\"return\",axios.post(LOGIN_URL,data).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _loginWithEmailAndPassword.apply(this,arguments);}export function updateUserProfile(_x5,_x6,_x7,_x8){return _updateUserProfile.apply(this,arguments);}function _updateUserProfile(){_updateUserProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(currentPassword,token,email,password){var data,config;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data={current_password:currentPassword,email:email,password:password,client_id:CLIENT_ID,client_secret:CLIENT_SECRET};config={headers:{Authorization:\"Bearer \".concat(token)}};return _context3.abrupt(\"return\",axios.patch(UPDATE_PROFILE_URL,data,config).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _updateUserProfile.apply(this,arguments);}export function logoutUserWithToken(_x9){return _logoutUserWithToken.apply(this,arguments);}function _logoutUserWithToken(){_logoutUserWithToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(token){var data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data={token:token,client_id:CLIENT_ID,client_secret:CLIENT_SECRET};return _context4.abrupt(\"return\",axios.post(LOGOUT_URL,data).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _logoutUserWithToken.apply(this,arguments);}export function requestAccessTokenWithRefreshToken(_x10){return _requestAccessTokenWithRefreshToken.apply(this,arguments);}function _requestAccessTokenWithRefreshToken(){_requestAccessTokenWithRefreshToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(refreshToken){var data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data={grant_type:\"refresh_token\",refresh_token:refreshToken,client_id:CLIENT_ID,client_secret:CLIENT_SECRET};return _context5.abrupt(\"return\",axios.post(LOGIN_URL,data).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 2:case\"end\":return _context5.stop();}}},_callee5);}));return _requestAccessTokenWithRefreshToken.apply(this,arguments);}export function getCurrentUser(_x11){return _getCurrentUser.apply(this,arguments);}function _getCurrentUser(){_getCurrentUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(accessToken){var config;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:config={headers:{Authorization:\"Bearer \".concat(accessToken)}};return _context6.abrupt(\"return\",axios.get(CURRENT_USER_URL,config).then(function(response){return response.data;}).catch(function(error){return error.response.data;}));case 2:case\"end\":return _context6.stop();}}},_callee6);}));return _getCurrentUser.apply(this,arguments);}","map":{"version":3,"sources":["C:/ruby_prg/7/react-wishlist-series/frontend/src/app/api/sessionAPI.ts"],"names":["axios","LOGIN_URL","SIGNUP_URL","UPDATE_PROFILE_URL","LOGOUT_URL","CURRENT_USER_URL","CLIENT_ID","process","env","REACT_APP_CLIENT_ID","CLIENT_SECRET","REACT_APP_CLIENT_SECRET","createUserWithEmailAndPassword","email","password","data","client_id","post","then","response","catch","error","loginWithEmailAndPassword","grant_type","client_secret","updateUserProfile","currentPassword","token","current_password","config","headers","Authorization","patch","logoutUserWithToken","requestAccessTokenWithRefreshToken","refreshToken","refresh_token","getCurrentUser","accessToken","get"],"mappings":"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","sourcesContent":["import axios from \"./axios\";\r\n\r\nconst LOGIN_URL = \"/oauth/token\";\r\nconst SIGNUP_URL = \"/users\";\r\nconst UPDATE_PROFILE_URL = \"/users\";\r\nconst LOGOUT_URL = \"/oauth/revoke\";\r\nconst CURRENT_USER_URL = \"/users/me\";\r\n\r\nconst CLIENT_ID = process.env.REACT_APP_CLIENT_ID;\r\nconst CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET;\r\n\r\nexport async function createUserWithEmailAndPassword(\r\n  email: string,\r\n  password: string\r\n) {\r\n  const data = {\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n  };\r\n\r\n  return axios\r\n    .post(SIGNUP_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function loginWithEmailAndPassword(\r\n  email: string,\r\n  password: string\r\n) {\r\n  const data = {\r\n    grant_type: \"password\",\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGIN_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function updateUserProfile(\r\n  currentPassword: string,\r\n  token: string | undefined,\r\n  email?: string,\r\n  password?: string\r\n) {\r\n  const data = {\r\n    current_password: currentPassword,\r\n    email: email,\r\n    password: password,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  return axios\r\n    .patch(UPDATE_PROFILE_URL, data, config)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function logoutUserWithToken(token: string) {\r\n  const data = {\r\n    token: token,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGOUT_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function requestAccessTokenWithRefreshToken(refreshToken: string) {\r\n  const data = {\r\n    grant_type: \"refresh_token\",\r\n    refresh_token: refreshToken,\r\n    client_id: CLIENT_ID,\r\n    client_secret: CLIENT_SECRET,\r\n  };\r\n\r\n  return axios\r\n    .post(LOGIN_URL, data)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n\r\nexport async function getCurrentUser(accessToken: string) {\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${accessToken}`,\r\n    },\r\n  };\r\n\r\n  return axios\r\n    .get(CURRENT_USER_URL, config)\r\n    .then((response: any) => {\r\n      return response.data;\r\n    })\r\n    .catch((error: any) => {\r\n      return error.response.data;\r\n    });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}