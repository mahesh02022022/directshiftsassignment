{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Outlet}from'react-router-dom';import{refreshAccessToken}from'./sessionSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PersistLogin(){var loading=useSelector(function(state){return state.session.loading;});var accessToken=useSelector(function(state){return state.session.accessToken;});var refreshToken=useSelector(function(state){return state.session.refreshToken;});var dispatch=useDispatch();useEffect(function(){function verifyRefreshToken(){try{dispatch(refreshAccessToken(refreshToken));}catch(error){console.log(error);}}if(!accessToken){verifyRefreshToken();}},[accessToken,refreshToken]);return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(Outlet,{})});}export default PersistLogin;","map":{"version":3,"sources":["C:/ruby_prg/7/react-wishlist-series/frontend/src/app/features/sessions/PersistLogin.tsx"],"names":["React","useEffect","useDispatch","useSelector","Outlet","refreshAccessToken","PersistLogin","loading","state","session","accessToken","refreshToken","dispatch","verifyRefreshToken","error","console","log"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,KAAuB,kBAAvB,CAEA,OAASC,kBAAT,KAAmC,gBAAnC,C,gGAEA,QAASC,CAAAA,YAAT,EAAwB,CACtB,GAAMC,CAAAA,OAAO,CAAGJ,WAAW,CAAC,SAACK,KAAD,QAAsBA,CAAAA,KAAK,CAACC,OAAN,CAAcF,OAApC,EAAD,CAA3B,CACA,GAAMG,CAAAA,WAAW,CAAGP,WAAW,CAAC,SAACK,KAAD,QAAuBA,CAAAA,KAAK,CAACC,OAAN,CAAcC,WAArC,EAAD,CAA/B,CACA,GAAMC,CAAAA,YAAY,CAAGR,WAAW,CAAC,SAACK,KAAD,QAAuBA,CAAAA,KAAK,CAACC,OAAN,CAAcE,YAArC,EAAD,CAAhC,CACA,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACd,QAASY,CAAAA,kBAAT,EAA8B,CAC5B,GAAI,CACFD,QAAQ,CAACP,kBAAkB,CAACM,YAAD,CAAnB,CAAR,CACD,CAAC,MAAOG,KAAP,CAAc,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CACF,CACD,GAAI,CAACJ,WAAL,CAAkB,CAChBG,kBAAkB,GACnB,CACF,CAXQ,CAWN,CAACH,WAAD,CAAcC,YAAd,CAXM,CAAT,CAaA,mBACE,yBACGJ,OAAO,cAAG,iCAAH,cAAuB,KAAC,MAAD,IADjC,EADF,CAKD,CAED,cAAeD,CAAAA,YAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Outlet } from 'react-router-dom';\r\nimport { RootState } from '../../store';\r\nimport { refreshAccessToken } from './sessionSlice';\r\n\r\nfunction PersistLogin() {\r\n  const loading = useSelector((state: RootState) => state.session.loading);\r\n  const accessToken = useSelector((state : RootState) => state.session.accessToken);\r\n  const refreshToken = useSelector((state : RootState) => state.session.refreshToken);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    function verifyRefreshToken() {\r\n      try {\r\n        dispatch(refreshAccessToken(refreshToken));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    if (!accessToken) {\r\n      verifyRefreshToken();\r\n    }\r\n  }, [accessToken, refreshToken]);\r\n\r\n  return (\r\n    <>\r\n      {loading ? <p>Loading...</p> : <Outlet />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PersistLogin"]},"metadata":{},"sourceType":"module"}